/*!
 * FullCalendar v1.6.4-yearview
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw - 2014 Tanguy Pruvot
 */
(function(t,e){function n(e){t.extend(!0,Ee,e)}function r(n,r,i){function f(t){oe?g()&&(S(),M(t)):u()}function u(){ie=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),oe=t("<div class='fc-content' style='position:relative'/>").prependTo(n),re=new a(ne,r),ae=re.render(),ae&&n.prepend(ae),m(r.defaultView),r.handleWindowResize&&t(window).resize(x),y()||d()}function d(){setTimeout(function(){!se.start&&y()&&D()},0)}function h(){se&&(ee("viewDestroy",se,se,se.element),se.triggerEventDestroy()),t(window).unbind("resize",x),re.destroy(),oe.remove(),n.removeClass("fc fc-rtl ui-widget")}function g(){return n.is(":visible")}function y(){return t("body").is(":visible")}function m(t){se&&t==se.name||w(t)}function w(e){ge++,se&&(ee("viewDestroy",se,se,se.element),j(),se.triggerEventDestroy(),$(),se.element.remove(),re.deactivateButton(se.name)),re.activateButton(e),se=new Fe[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(oe),ne),D(),Q(),ge--}function D(t){(!se.start||t||se.start>pe||pe>=se.end)&&g()&&M(t)}function M(t){ge++,se.start&&(ee("viewDestroy",se,se,se.element),j(),H()),$(),se.render(pe,t||0),E(),Q(),(se.afterRender||A)(),L(),q(),ee("viewRender",se,se,se.element),se.trigger("viewDisplay",ve),ge--,R()}function T(){g()&&(j(),H(),S(),E(),k())}function S(){ce=r.contentHeight?r.contentHeight:r.height?r.height-(ae?ae.height():0)-Y(oe):Math.round(oe.width()/Math.max(r.aspectRatio,.5))}function E(){ce===e&&S(),ge++,se.setHeight(ce),se.setWidth(oe.width()),ge--,le=n.outerWidth()}function x(){if(!ge)if(se.start){var t=++he;setTimeout(function(){t==he&&!ge&&g()&&le!=(le=n.outerWidth())&&(ge++,T(),se.trigger("windowResize",ve),ge--)},200)}else d()}function O(){H(),z()}function F(t){H(),k(t)}function k(t){g()&&(se.setEventData(ye),se.renderEvents(ye,t),se.trigger("eventAfterAllRender"))}function H(){se.triggerEventDestroy(),se.clearEvents(),se.clearEventData()}function R(){!r.lazyFetching||ue(se.visStart,se.visEnd)?z():k()}function z(){de(se.visStart,se.visEnd)}function N(t){ye=t,k()}function W(t){F(t)}function L(){re.updateTitle(se.title)}function _(){var t=new Date;re.toggleEnable("today",se.start>t||t>=se.end)}function q(){_(),r.minDate&&re.toggleEnable("prev",r.minDate<se.start),r.maxDate&&re.toggleEnable("next",r.maxDate>se.end)}function P(t,n,r){se.select(t,n,r===e?!0:r)}function j(){se&&se.unselect()}function B(){D(-1)}function I(){D(1)}function V(){s(pe,-1),D()}function X(){s(pe,1),D()}function G(){pe=new Date,D()}function J(t,e,n){t instanceof Date?pe=v(t):p(pe,t,e,n),D()}function U(t,n,r){t!==e&&s(pe,t),n!==e&&l(pe,n),r!==e&&c(pe,r),D()}function Z(){return v(pe)}function $(){oe.css({width:"100%",height:oe.height(),overflow:"hidden"})}function Q(){oe.css({width:"",height:"",overflow:""})}function K(){return se}function te(t,n){return n===e?r[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(r[t]=n,T()),e)}function ee(t,n){return r[t]?r[t].apply(n||ve,Array.prototype.slice.call(arguments,2)):e}var ne=this;ne.options=r,ne.render=f,ne.destroy=h,ne.refetchEvents=O,ne.reportEvents=N,ne.reportEventChange=W,ne.rerenderEvents=F,ne.changeView=m,ne.select=P,ne.unselect=j,ne.prev=B,ne.next=I,ne.prevYear=V,ne.nextYear=X,ne.today=G,ne.gotoDate=J,ne.incrementDate=U,ne.formatDate=function(t,e){return b(t,e,r)},ne.formatDates=function(t,e,n){return C(t,e,n,r)},ne.getDate=Z,ne.getView=K,ne.option=te,ne.trigger=ee,o.call(ne,r,i);var re,ae,oe,ie,se,le,ce,fe,ue=ne.isFetchNeeded,de=ne.fetchEvents,ve=n[0],he=0,ge=0,pe=new Date,ye=[];p(pe,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(fe=a,se.dragStart(fe,e,n))}}).bind("dragstop",function(t,e){fe&&(se.dragStop(fe,t,e),fe=null)})}function a(n,r){function a(){h=r.theme?"ui":"fc";var n=r.header;return n?g=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right"))):e}function o(){g.remove()}function i(e){var a=t("<td class='fc-header-"+e+"'/>"),o=r.header[e];return o&&t.each(o.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(e,i){if("title"==i)a.append("<span class='fc-header-title'><h4>&nbsp;</h4></span>"),o&&o.addClass(h+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:Fe[i]&&(s=function(){f.removeClass(h+"-state-hover"),n.changeView(i)}),s){var l=r.theme?P(r.buttonIcons,i):null,c=P(r.buttonText,i),f=t("<span class='fc-button fc-button-"+i+" "+h+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){f.hasClass(h+"-state-disabled")||s()}).mousedown(function(){f.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-down")}).mouseup(function(){f.removeClass(h+"-state-down")}).hover(function(){f.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-hover")},function(){f.removeClass(h+"-state-hover").removeClass(h+"-state-down")}).appendTo(a);B(f),o||f.addClass(h+"-corner-left"),o=f}}}),o&&o.addClass(h+"-corner-right")}),a}function s(t){g.find("h4").html(t)}function l(t){g.find("span.fc-button-"+t).addClass(h+"-state-active")}function c(t){g.find("span.fc-button-"+t).removeClass(h+"-state-active")}function f(t){g.find("span.fc-button-"+t).addClass(h+"-state-disabled")}function u(t){g.find("span.fc-button-"+t).removeClass(h+"-state-disabled")}function d(t,e){e?u(t):f(t)}var v=this;v.render=a,v.destroy=o,v.updateTitle=s,v.activateButton=l,v.deactivateButton=c,v.disableButton=f,v.enableButton=u,v.toggleEnable=d;var h,g=t([])}function o(n,r){function a(t,e){return!T||T>t||e>S}function o(t,e){T=t,S=e,z=[];var n=++H,r=k.length;R=r;for(var a=0;r>a;a++)i(k[a],n)}function i(e,r){s(e,function(a){if(r==H){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=e,w(a[o]);z=z.concat(a)}R--,R||O(z)}})}function s(r,a){var o,i,l=Oe.sourceFetchers;for(o=0;l.length>o;o++){if(i=l[o](r,T,S,a),i===!0)return;if("object"==typeof i)return s(i,a),e}var c=r.events;if(c)t.isFunction(c)?(p(),c(v(T),v(S),function(t){a(t),y()})):t.isArray(c)?a(c):a();else{var f=r.url;if(f){var u,d=r.success,h=r.error,g=r.complete;u=t.isFunction(r.data)?r.data():r.data;var m=t.extend({},u||{}),w=G(r.startParam,n.startParam),D=G(r.endParam,n.endParam);w&&(m[w]=Math.round(+T/1e3)),D&&(m[D]=Math.round(+S/1e3)),p(),t.ajax(t.extend({},ke,r,{data:m,success:function(e){e=e||[];var n=X(d,this,arguments);t.isArray(n)&&(e=n),a(e)},error:function(){X(h,this,arguments),a()},complete:function(){X(g,this,arguments),y()}}))}else a()}}function l(t){t=c(t),t&&(R++,i(t,H))}function c(n){return t.isFunction(n)||t.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(D(n),k.push(n),n):e}function f(e){k=t.grep(k,function(t){return!b(t,e)}),z=t.grep(z,function(t){return!b(t.source,e)}),O(z)}function u(t){var e,n,r=z.length,a=x().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=z[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,w(n));w(t),O(z)}function d(t,e){w(t),t.source||(e&&(F.events.push(t),t.source=F),z.push(t)),O(z)}function h(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}z=t.grep(z,e,!0);for(var r=0;k.length>r;r++)t.isArray(k[r].events)&&(k[r].events=t.grep(k[r].events,e,!0))}else{z=[];for(var r=0;k.length>r;r++)t.isArray(k[r].events)&&(k[r].events=[])}O(z)}function g(e){return t.isFunction(e)?t.grep(z,e):e?(e+="",t.grep(z,function(t){return t._id==e})):z}function p(){Y++||E("loading",null,!0,x())}function y(){--Y||E("loading",null,!1,x())}function w(t){var r=t.source||{},a=G(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+He++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=v(t.start=m(t.start,a)),t.end=m(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?v(t.end):null,t.allDay===e&&(t.allDay=G(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function D(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Oe.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function b(t,e){return t&&e&&C(t)==C(e)}function C(t){return("object"==typeof t?t.events||t.url:"")||t}var M=this;M.isFetchNeeded=a,M.fetchEvents=o,M.addEventSource=l,M.removeEventSource=f,M.updateEvent=u,M.renderEvent=d,M.removeEvents=h,M.clientEvents=g,M.normalizeEvent=w;for(var T,S,E=M.trigger,x=M.getView,O=M.reportEvents,F={events:[]},k=[F],H=0,R=0,Y=0,z=[],N=0;r.length>N;N++)c(r[N])}function s(t,e,n){return t.setFullYear(t.getFullYear()+e),n||d(t),t}function l(t,e,n){if(+t){var r=t.getMonth()+e,a=v(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||d(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function c(t,e,n){if(+t){var r=t.getDate()+e,a=v(t);a.setHours(9),a.setDate(r),t.setDate(r),n||d(t),f(t,a)}return t}function f(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*ze)}function u(t,e){return t.setMinutes(t.getMinutes()+e),t}function d(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function v(t,e){return e?d(new Date(+t)):new Date(+t)}function h(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function g(t,e){return Math.round((v(t,!0)-v(e,!0))/Ye)}function p(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function y(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)c(t,e);return t}function m(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),w(t,n)||(t?new Date(t):null)):null}function w(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),f(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),f(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function D(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function b(t,e,n){return C(t,null,e,n)}function C(t,e,n,r){r=r||Ee;var a,o,i,s,l=t,c=e,f=n.length,u="";for(a=0;f>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;f>i;i++)if("'"==n.charAt(i)){l&&(u+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;f>i;i++)if(")"==n.charAt(i)){var d=b(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(u+=d),a=i;break}}else if("["==o){for(i=a+1;f>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),d=b(l,v,r);d!=b(c,v,r)&&(u+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=f;i>a;i--)if(s=We[n.substring(a,i)]){l&&(u+=s(l,r)),a=i-1;break}i==a&&l&&(u+=o)}return u}function M(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function T(t){return t.end?S(t.end,t.allDay):c(v(t.start),1)}function S(t,e){return t=v(t),e||t.getHours()||t.getMinutes()?c(t,1):d(t)}function E(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function x(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-F(a,r)))}function O(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-Y(a,r)))}function F(t,e){return k(t)+R(t)+(e?H(t):0)}function k(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function H(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function R(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function Y(t,e){return z(t)+W(t)+(e?N(t):0)}function z(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function W(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function A(){}function L(t,e){return t-e}function _(t){return Math.max.apply(Math,t)}function q(t){return(10>t?"0":"")+t}function P(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=t[a[o].toLowerCase()],r!==e)return r;return t[""]}function j(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function B(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function I(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function V(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function X(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function G(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function J(t,e){function n(t,e){e&&(l(t,e),t.setDate(1));var n=a("firstDay"),u=v(t,!0);u.setDate(1);var d=l(v(u),1),h=v(u);c(h,-((h.getDay()-n+7)%7)),i(h);var p=v(d);c(p,(7-p.getDay()+n)%7),i(p,-1,!0);var y=s(),m=Math.round(g(p,h)/7);"fixed"==a("weekMode")&&(c(p,7*(6-m)),m=6),r.title=f(u,a("titleFormat")),r.start=u,r.end=d,r.visStart=h,r.visEnd=p,o(m,y,!0)}var r=this;r.render=n,$.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,f=e.formatDate}function U(t,e){function n(t,e){e&&c(t,7*e);var n=c(v(t),-((t.getDay()-a("firstDay")+7)%7)),f=c(v(n),7),u=v(n);i(u);var d=v(f);i(d,-1,!0);var h=s();r.start=n,r.end=f,r.visStart=u,r.visEnd=d,r.title=l(u,c(v(d),-1),a("titleFormat")),o(1,h,!1)}var r=this;r.render=n,$.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=r.getCellsPerWeek,l=e.formatDates}function Z(t,e){function n(t,e){e&&c(t,e),i(t,0>e?-1:1);var n=v(t,!0),l=c(v(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=l,o(1,1,!1)}var r=this;r.render=n,$.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate}function $(e,n,r){function a(t,e,n){ee=t,ne=e,re=n,o(),q||i(),s()}function o(){le=ve("theme")?"ui":"fc",ce=ve("columnFormat"),fe=ve("weekNumbers"),ue=ve("weekNumberTitle"),de="iso"!=ve("weekNumberCalculation")?"w":"W"}function i(){U=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(){var n=l();A&&A.remove(),A=t(n).appendTo(e),L=A.find("thead"),_=L.find(".fc-day-header"),q=A.find("tbody"),P=q.find("tr"),V=q.find(".fc-day"),X=P.find("td:first-child"),G=P.eq(0).find(".fc-day > div"),J=P.eq(0).find(".fc-day-content > div"),I(L.add(L.find("tr"))),I(P),P.eq(0).addClass("fc-first"),P.filter(":last").addClass("fc-last"),V.each(function(e,n){var r=we(Math.floor(e/ne),e%ne);he("dayRender",W,r,t(n))}),y(V)}function l(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+f()+u()+"</table>";return t}function f(){var t,e,n=le+"-widget-header",r="";for(r+="<thead><tr>",fe&&(r+="<th class='fc-week-number "+n+"'>"+j(ue)+"</th>"),t=0;ne>t;t++)e=we(0,t),r+="<th class='fc-day-header fc-"+Re[e.getDay()]+" "+n+"'>"+j(xe(e,ce))+"</th>";return r+="</tr></thead>"}function u(){var t,e,n,r=le+"-widget-content",a="";for(a+="<tbody>",t=0;ee>t;t++){for(a+="<tr class='fc-week'>",fe&&(n=we(t,0),a+="<td class='fc-week-number "+r+"'>"+"<div>"+j(xe(n,de))+"</div>"+"</td>"),e=0;ne>e;e++)n=we(t,e),a+=h(n);a+="</tr>"}return a+="</tbody>"}function h(t){var e=le+"-widget-content",n=W.start.getMonth(),r=d(new Date),a="",o=["fc-day","fc-"+Re[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",le+"-state-highlight"):r>t?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"'"+" data-date='"+xe(t,"yyyy-MM-dd")+"'"+">"+"<div>",re&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(e){$=e;var n,r,a,o=$-L.height();"variable"==ve("weekMode")?n=r=Math.floor(o/(1==ee?2:6)):(n=Math.floor(o/ee),r=o-n*(ee-1)),X.each(function(e,o){ee>e&&(a=t(o),a.find("> div").css("min-height",(e==ee-1?r:n)-Y(a)))})}function p(t){Z=t,ie.clear(),se.clear(),te=0,fe&&(te=L.find("th.fc-week-number").outerWidth()),K=Math.floor((Z-te)/ne),x(_.slice(0,-1),K)}function y(t){t.click(m).mousedown(me)}function m(e){if(!ve("selectable")){var n=w(t(this).data("date"));he("dayClick",this,n,!0,e)}}function D(t,e,n){n&&ae.build();for(var r=Ee(t,e),a=0;r.length>a;a++){var o=r[a];y(b(o.row,o.leftCol,o.row,o.rightCol))}}function b(t,n,r,a){var o=ae.rect(t,n,r,a,e);return pe(o,e)}function C(t){return v(t)}function M(t,e){D(t,c(v(e),1),!0)}function T(){ye()}function S(t,e,n){var r=Te(t),a=V[r.row*ne+r.col];he("dayClick",a,t,e,n)}function E(t,e){oe.start(function(t){ye(),t&&b(t.row,t.col,t.row,t.col)},e)}function O(t,e,n){var r=oe.stop();if(ye(),r){var a=we(r);he("drop",t,a,!0,e,n)}}function F(t){return v(t.start)}function k(t){return ie.left(t)}function H(t){return ie.right(t)}function R(t){return se.left(t)}function z(t){return se.right(t)}function N(t){return P.eq(t)}var W=this;W.renderBasic=a,W.setHeight=g,W.setWidth=p,W.renderDayOverlay=D,W.defaultSelectionEnd=C,W.renderSelection=M,W.clearSelection=T,W.reportDayClick=S,W.dragStart=E,W.dragStop=O,W.defaultEventEnd=F,W.getHoverListener=function(){return oe},W.colLeft=k,W.colRight=H,W.colContentLeft=R,W.colContentRight=z,W.getIsCellAllDay=function(){return!0},W.allDayRow=N,W.getRowCnt=function(){return ee},W.getColCnt=function(){return ne},W.getColWidth=function(){return K},W.getDaySegmentContainer=function(){return U},ge.call(W,e,n,r),be.call(W),De.call(W),Q.call(W);var A,L,_,q,P,V,X,G,J,U,Z,$,K,te,ee,ne,re,ae,oe,ie,se,le,ce,fe,ue,de,ve=W.opt,he=W.trigger,pe=W.renderOverlay,ye=W.clearOverlays,me=W.daySelectionMousedown,we=W.cellToDate,Te=W.dateToCell,Ee=W.rangeToSegments,xe=n.formatDate;B(e.addClass("fc-grid")),ae=new Ce(function(e,n){var r,a,o;_.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),P.each(function(n,i){ee>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),oe=new Me(ae),ie=new Se(function(t){return G.eq(t)}),se=new Se(function(t){return J.eq(t)})}function Q(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,pe.call(n)}function K(t,e){function n(t,e){var n=a("firstMonth")||0,l=a("lastMonth")||n+12,f=l-n,u=v(t,!0);u.setFullYear(t.getFullYear(),l,0),e?r.curYear=s(t,e):n>0&&t.getMonth()<=u.getMonth()&&(r.curYear=s(t,-1));var d=v(t,!0);d.setFullYear(d.getFullYear(),n,1);var h=v(t);h.setFullYear(h.getFullYear(),l,0);var g=v(d),p=a("firstDay"),y=a("yearColumns")||3,m=a("weekends")?0:1,w=v(h);c(g,-((g.getDay()-Math.max(p,m)+7)%7)),c(w,(7-w.getDay()+Math.max(p,m))%7),r.title=i(d,a("titleFormat")),n+f>12&&(r.title+=i(h," - yyyy")),r.start=d,r.end=h,r.visStart=g,r.visEnd=w,o(y,6,m?5:7,!0)}var r=this;r.render=n,te.call(r,t,e,"year");var a=r.opt,o=r.renderYear,i=e.formatDate}function te(e,n,r){function a(t,e,n,r){le=n,o(),_();var a=!K;a||(He(),K.remove());var i=parseInt(t,10);s(i,r),l()}function o(){de=Fe("isRTL"),de?(ve=-1,he=le-1):(ve=1,he=0),pe=Fe("firstDay"),ye=Fe("firstMonth")||0,me=Fe("lastMonth")||ye+12,Oe=Fe("yearCellMinH")||20,we=Fe("hiddenMonths")||[],Te=Fe("weekends")?0:1,Ee=Fe("theme")?"ui":"fc",xe=Fe("columnFormat")}function s(r,a){var o,i,s,l,f,u,d,g,p=Ee+"-widget-header",m=Ee+"-widget-content",w=0,D=v($.start),b=D.getFullYear(),C=me-ye;se=0;var M=[];for(l=0;7>l;l++)D.setFullYear(2013,11,1+l),M[l]=Ae(D,"ddd");for(D=v($.start),o='<table class="fc-year-main-table fc-border-separate" style="width:100%;"><tr>',o+='<td class="fc-year-month-border fc-first"></td>',f=0,l=ye;me>l;l++){var T=-1!=t.inArray(l,we),S=T?"display:none;":"";D.setFullYear(b,l,1),u=D.getFullYear(),d=Ae(D,"MMMM"),ye+C>12&&(d=d+" "+u),Te&&y(D);var E=(D.getDay()+7-pe)%7;for(D.setFullYear(b,l,-1*E+1),0==f%r&&f>0&&!T&&(w++,o+='<td class="fc-year-month-border fc-last"></td></tr><tr><td class="fc-year-month-border fc-first"></td>'),r>f%r&&f%r>0&&!T&&(o+='<td class="fc-year-month-separator"></td>'),o+='<td class="fc-year-monthly-td" style="'+S+'">',o+='<table class="fc-border-separate fc-year-month" style="width:100%;" cellspacing="0"><thead><tr><td colspan="7" class="fc-year-monthly-header" /><div class="fc-year-monthly-name'+(0==w?" fc-first":"")+'">'+'<a data-year="'+u+'" data-month="'+l%12+'" href="#">'+j(d)+"</a>"+"</div>"+"</td></tr>"+"<tr>",i=pe;le+pe>i;i++)o+='<th class="fc-year-weekly-head fc-'+Re[i%7]+" "+p+'" width="'+(0|100/le)+'%">'+M[i%7]+"</th>";for(o+="</tr></thead><tbody>",qe[l]=0,i=0;6>i;i++)if(Te&&y(D),D.getMonth()!=(l+1)%12||"fixed"==Fe("weekMode")){for(qe[l]++,se++,o+='<tr class="fc-week'+i+'">',s=0;le>s;s++)g=D.getMonth()==l%12?Ae(D,"-yyyy-MM-dd"):"",o+='<td class="'+m+" fc-day fc-"+Re[D.getDay()]+" fc-day"+g+'">'+"<div>"+(a?'<div class="fc-day-number"/>':"")+'<div class="fc-day-content" style="min-height:'+Oe+'px;">'+'<div style="position:relative;"></div>'+"</div>"+"</div>"+"</td>",c(D,1);Te&&y(D),o+="</tr>"}o+="</tbody></table>",o+='<div class="fc-year-monthly-footer"></div>',o+="</td>",T||f++}o+='<td class="fc-year-month-border fc-last"></td>',o+="</tr></table>",K=t(o).appendTo(e),head=K.find("thead"),headCells=head.find("th.fc-year-weekly-head"),te=K.find("table tbody tr"),ne=te.find("td").not(".fc-year-monthly-td"),bodyFirstCells=ne.filter(":first-child"),ee=K.find("table"),ee.find("tbody .fc-week0").addClass("fc-first"),ee.find("tbody > tr:last").addClass("fc-last"),re=ee.find("tbody .fc-week0 .fc-day-content div"),I(head.add(head.find("tr"))),I(te),K.find(".fc-year-monthly-name a").click(function(){n.changeView("month"),n.gotoDate(t(this).attr("data-year"),t(this).attr("data-month"),1)}),h(ne),ae=t('<div style="position:absolute;z-index:8;top:0;left:0;"/>').appendTo(e)}function l(){$.start.getFullYear();var e,n=d(new Date);ee.each(function(r,a){$.curYear||($.curYear=$.start);var o=v($.curYear),i=o.getFullYear(),s=r+ye;o.setFullYear(i,s,1),Te&&y(o);var l=(o.getDay()+7-pe)%7,f=0;o.setFullYear(i,s,-1*l+1),_e[s]=[0,0,0,0],t(a).find("tbody > tr").each(function(r,a){Te&&y(o),0==r&&z(o,s)&&(_e[s][2]=o.getDate()-1),t(a).find("td").each(function(r,a){e=t(a),z(o,s)||(e.addClass("fc-other-month"),o.getMonth()==(s+11)%12?_e[s][0]++:_e[s][1]++),+o==+n?e.addClass(Ee+"-state-highlight fc-today"):e.addClass(+n>+o?"fc-past":"fc-future");var i=e.find("div.fc-day-number");i.text(o.getDate()),z(o,s)&&(f=o.getDate()),c(o,1)}),Te&&y(o)});var u=Y($.curYear.getFullYear(),s+1)-f;_e[s][3]=u}),te.filter(".fc-year-have-event").removeClass("fc-year-have-event")}function f(){}function u(t){oe=t,ue.clear()}function h(t){t.click(p).mousedown(We)}function p(t){if(!Fe("selectable")){var e=this.className.match(/fc\-day\-(\d+)\-(\d+)\-(\d+)/),n=new Date(e[1],e[2]-1,e[3]);ke("dayClick",this,n,!0,t)}}function m(e,n,r){if(isFinite(e)){v($.visStart);var a=0,o=(e.getMonth()-$.start.getMonth()+12)%12;ce=Le[o],r&&ce.build(),ee.each(function(r,o){var s=v($.curYear),l=r+ye,f=s.getFullYear();s.setFullYear(f,l,1),Te&&y(s);var u=(s.getDay()+7-pe)%7;s.setFullYear(f,l,-1*u+1),t(o).find("tbody > tr").each(function(t){Te&&y(s);for(var o=le,f=v(s);f.getMonth()!=l%12;)c(f,1),o--;var u=v(f);for(i=0;o>i&&(c(u,1),!(u.getMonth()>f.getMonth()));i++);var d=new Date(Math.max(f,e)),p=new Date(Math.min(u,n));if(p>d){var m,D;de?(m=g(p,s)*ve+he+1,D=g(d,s)*ve+he+1):(m=g(d,s),D=g(p,s));var b=Le[r];h(w(b,t,m,t,D-1))}a+=1,c(s,5),Te?y(s):c(s,2)})})}}function w(t,n,r,a,o){var i=t.rect(n,r,a,o,e);return Ye(i,e)}function D(e){return t(ee[0|e/5]).width()}function b(t){return v(t)}function C(t,e){m(t,c(v(e),1),!0)}function M(){ze()}function T(t,e,n){var r=G(t),a=ne[r.row*le+r.col];ke("dayClick",a,t,e,n)}function S(t,e){fe.start(function(t){ze(),t&&w(t.grid,t.row,t.col,t.row,t.col)},e)}function E(t,e,n){var r=fe.stop();if(ze(),r){var a=F(r),o=k(a),i=H(o);ke("drop",t,i,!0,e,n)}}function x(t){return qe[t]*(Te?5:7)}function O(t){var e,n,r=0,a=t-_e[ye][0];for(e=ye;me>e;e++){var o=Y($.curYear.getFullYear(),e+1),i=new Date($.curYear.getFullYear(),e,1);if(o>a){for(r+=_e[e][0],n=0;a>n;n++)Te&&Ne(i)||(r+=1),c(i,1);return r}if(e==me-1)return r+a;a-=o,r+=x(e)}}function F(t,e){var n=$.getColCnt(),r=null,a=de?-1:1,o=de?n-1:0;"object"==typeof t&&(r=t.grid,e=t.col,t=t.row);for(var i=0,s=0;r.offset>s;s++)i+=x(s+ye);return i+=t*n+(e*a+o)}function k(t){for(var e=_e[ye][0],n=ye;me>n;n++){var r=Y($.curYear.getFullYear(),n+1),a=x(n);if(a>t){t-=_e[n][0],e+=_e[n][2];for(var o=new Date($.curYear.getFullYear(),n,1+_e[n][2]);t>0;)c(o,1),Te&&Ne(o)||(t-=1),e+=1;return e}t-=a,e+=r}}function H(t){var e=v($.visStart);return c(e,t),e}function R(e,n){var r=$.getRowCnt(),a=$.getColCnt(),o=[],i=v(n);if(c(i,-1),$.visStart>i||e>$.visEnd)return o;var s=$.dateToDayOffset(e),l=$.dateToDayOffset(n);Te&&Ne(i)&&(y(i,-1),c(i,1),l=$.dateToDayOffset(i));for(var f,u=$.dayOffsetToCellOffset(s),d=$.dayOffsetToCellOffset(l-1),h=!1,g=0;r>g;g++){var p=g*a,m=p+a-1,w=Math.max(u,p),D=Math.min(d,m);if(D>=w){var b=$.rowToGridOffset(g),C=W(g),M=w-u,T=!1;0==C&&o.length&&M>=0&&14>=M&&_e[b+ye][0]>1&&(w=Math.min(u,p));for(var S=$.cellOffsetToCell(w),E=$.cellOffsetToCell(D),x=[S.col,E.col].sort(),O=$.cellOffsetToDayOffset(D);O>=l;)if(x[1]--,O--,x[1]<x[0]){T=!0;break}f=$.cellOffsetToDayOffset(w)==s,h=O+1==l,-1!=t.inArray(ye+b,we)&&(T=!0),T||o.push({gridOffset:b,row:g,leftCol:x[0],rightCol:x[1],isStart:f,isEnd:h})}}return o}function Y(t,e){return new Date(t,e,0).getDate()}function z(t,e){var n=t.getFullYear()-$.start.getFullYear();return t.getMonth()==e-12*n}function N(t){for(var e=0,n=ye;me>n;n++)if(e+=qe[n],e>t)return n-ye;return-1}function W(t){for(var e=0,n=ye;me>n;n++)if(e+=qe[n],e>t)return t-(e-qe[n]);return-1}function A(t){return v(t.start)}function L(e){return t(ee[e])}function _(){for(var e=[],n=ye;me>n;n++)e.push(n);Le=[],t.each(e,function(e){var n=new Ce(function(n,r){var a,o,i,s=L(e),l=s.find("thead"),c=l.find("th.fc-year-weekly-head"),f=s.find("tbody tr");c.each(function(e,n){a=t(n),o=a.offset().left,i=[o,o+a.outerWidth()],r[e]=i}),f.each(function(e,r){se>e&&(a=t(r),o=a.offset().top,i=[o,o+a.outerHeight()],n[e]=i)})});n.offset=e,Le.push(n)}),fe=new Me(Le)}function q(t,e){var n=L(e);return ue.left(t)+n.position().left}function P(t,e){var n=L(e);return ue.right(t)+n.position().left}function V(t,e){return q(t,e)}function X(t,e){return P(t,e)}function G(t){return{row:Math.floor(g(t,$.visStart)/7),col:J(t.getDay())}}function J(t){return(t-Math.max(pe,Te)+le)%le*ve+he}function U(t){return te.eq(t)}function Z(){return{left:0,right:oe}}var $=this;$.renderYear=a,$.setHeight=f,$.setWidth=u,$.renderDayOverlay=m,$.defaultSelectionEnd=b,$.renderSelection=C,$.clearSelection=M,$.reportDayClick=T,$.defaultEventEnd=A,$.getHoverListener=function(){return fe},$.colContentLeft=q,$.colContentRight=P,$.colLeft=V,$.colRight=X,$.dayOfWeekCol=J,$.dateCell=G,$.allDayRow=U,$.allDayBounds=Z,$.getIsCellAllDay=function(){return!0},$.getRowCnt=function(){return se},$.getColCnt=function(){return le},$.getColWidth=function(){return ie},$.getBodyRows=function(){return te},$.getDaySegmentContainer=function(){return ae},$.getRowMaxWidth=D,ge.call($,e,n,r),be.call($),De.call($),$.rangeToSegments=R,Q.call($),$.rowToGridOffset=N,$.dayOffsetToCellOffset=O,$.cellToCellOffset=F,$.cellOffsetToDayOffset=k,$.dragStart=S,$.dragStop=E;var K,te,ee,ne,re,ae,oe,ie,se,le,ce,fe,ue,de,ve,he,pe,ye,me,we,Te,Ee,xe,Oe,Fe=$.opt,ke=$.trigger,He=$.clearEvents,Ye=$.renderOverlay,ze=$.clearOverlays,Ne=$.isHiddenDay,We=$.daySelectionMousedown,Ae=n.formatDate,Le=[],_e=[],qe=[];B(e.addClass("fc-grid")),ue=new Se(function(t){return re.eq(t)})}function ee(t,e){function n(t,e){e&&c(t,7*e);var n=c(v(t),-((t.getDay()-a("firstDay")+7)%7)),f=c(v(n),7),u=v(n);i(u);var d=v(f);i(d,-1,!0);var h=s();r.title=l(u,c(v(d),-1),a("titleFormat")),r.start=n,r.end=f,r.visStart=u,r.visEnd=d,o(h)}var r=this;r.render=n,re.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=r.getCellsPerWeek,l=e.formatDates}function ne(t,e){function n(t,e){e&&c(t,e),i(t,0>e?-1:1);var n=v(t,!0),l=c(v(n),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=l,o(1)}var r=this;r.render=n,re.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate}function re(n,r,a){function o(t){ze=t,i(),K?l():s()}function i(){qe=Je("theme")?"ui":"fc",Pe=Je("isRTL"),je=D(Je("minTime")),Be=D(Je("maxTime")),Ie=Je("columnFormat"),Ve=Je("weekNumbers"),Xe=Je("weekNumberTitle"),Ge="iso"!=Je("weekNumberCalculation")?"w":"W",ke=Je("snapMinutes")||Je("slotMinutes")}function s(){var e,r,a,o,i,s=qe+"-widget-header",c=qe+"-widget-content",f=0==Je("slotMinutes")%15;for(l(),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Je("allDaySlot")?(fe=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Je("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ue=t(e).appendTo(ce),de=ue.find("tr"),C(de.find("td")),ce.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):fe=t([]),ve=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),he=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ve),pe=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(he),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=h(),o=u(v(r),Be),u(r,je),Ne=0,a=0;o>r;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(f&&i?"&nbsp;":on(r,Je("axisFormat")))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(r,Je("slotMinutes")),Ne++;e+="</tbody></table>",ye=t(e).appendTo(he),M(ye.find("td"))}function l(){var e=f();K&&K.remove(),K=t(e).appendTo(n),te=K.find("thead"),ee=te.find("th").slice(1,-1),ne=K.find("tbody"),re=ne.find("td").slice(0,-1),oe=re.find("> div"),ie=re.find(".fc-day-content > div"),se=re.eq(0),le=oe.eq(0),I(te.add(te.find("tr"))),I(ne.add(ne.find("tr")))
}function f(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+p()+"</table>";return t}function g(){var t,e,n,r=qe+"-widget-header",a="";for(a+="<thead><tr>",Ve?(t=nn(0,0),e=on(t,Ge),Pe?e+=Xe:e=Xe+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+j(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;ze>n;n++)t=nn(0,n),a+="<th class='fc-"+Re[t.getDay()]+" fc-col"+n+" "+r+"'>"+j(on(t,Ie))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function p(){var t,e,n,r,a,o=qe+"-widget-header",i=qe+"-widget-content",s=d(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n="",e=0;ze>e;e++)t=nn(0,e),a=["fc-col"+e,"fc-"+Re[t.getDay()],i],+t==+s?a.push(qe+"-state-highlight","fc-today"):s>t?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function y(t){t===e&&(t=Te),Te=t,sn={};var n=ne.position().top,r=ve.position().top,a=Math.min(t-n,ye.height()+r+1);le.height(a-Y(se)),ce.css("top",n),ve.height(a-r-1),Fe=ye.find("tr:first").height()+1,He=Je("slotMinutes")/ke,Ye=Fe/He}function m(e){we=e,Le.clear(),_e.clear();var n=te.find("th:first");ue&&(n=n.add(ue.find("th:first"))),n=n.add(ye.find("th:first")),Ee=0,x(n.width("").each(function(e,n){Ee=Math.max(Ee,t(n).outerWidth())}),Ee);var r=K.find(".fc-agenda-gutter");ue&&(r=r.add(ue.find("th.fc-agenda-gutter")));var a=ve[0].clientWidth;Oe=ve.width()-a,Oe?(x(r,Oe),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),xe=Math.floor((a-Ee)/ze),x(ee.slice(0,-1),xe)}function w(){function t(){ve.scrollTop(r)}var e=h(),n=v(e);n.setHours(Je("firstHour"));var r=A(e,n)+1;t(),setTimeout(t,0)}function b(){w()}function C(t){t.click(T).mousedown(tn)}function M(t){t.click(T).mousedown(J)}function T(t){if(!Je("selectable")){var e=Math.min(ze-1,Math.floor((t.pageX-K.offset().left-Ee)/xe)),n=nn(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Je("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+je),Ue("dayClick",re[e],n,!1,t)}else Ue("dayClick",re[e],n,!0,t)}}function S(t,e,n){n&&We.build();for(var r=an(t,e),a=0;r.length>a;a++){var o=r[a];C(E(o.row,o.leftCol,o.row,o.rightCol))}}function E(t,e,n,r){var a=We.rect(t,e,n,r,ce);return Ze(a,ce)}function F(t,e){for(var n=0;ze>n;n++){var r=nn(0,n),a=c(v(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(i>o){var s=We.rect(0,n,0,n,he),l=A(r,o),f=A(r,i);s.top=l,s.height=f-l,M(Ze(s,he))}}}function k(t){return Le.left(t)}function H(t){return _e.left(t)}function R(t){return Le.right(t)}function z(t){return _e.right(t)}function N(t){return Je("allDaySlot")&&!t.row}function W(t){var e=nn(0,t.col),n=t.row;return Je("allDaySlot")&&n--,n>=0&&u(e,je+n*ke),e}function A(t,n){if(t=v(t,!0),u(v(t),je)>n)return 0;if(n>=u(v(t),Be))return ye.height();var r=Je("slotMinutes"),a=60*n.getHours()+n.getMinutes()-je,o=Math.floor(a/r),i=sn[o];return i===e&&(i=sn[o]=ye.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+Fe*(a%r/r)))}function _(){return de}function q(t){var e=v(t.start);return t.allDay?e:u(e,Je("defaultEventMinutes"))}function P(t,e){return e?v(t):u(v(t),Je("slotMinutes"))}function V(t,e,n){n?Je("allDaySlot")&&S(t,c(v(e),1),!0):X(t,e)}function X(e,n){var r=Je("selectHelper");if(We.build(),r){var a=rn(e).col;if(a>=0&&ze>a){var o=We.rect(0,a,0,a,he),i=A(e,e),s=A(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",me=t(l).css(o).appendTo(he))}else o.isStart=!0,o.isEnd=!0,me=t(en({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),me.css("opacity",Je("dragOpacity"));me&&(M(me),he.append(me),x(me,o.width,!0),O(me,o.height,!0))}}}else F(e,n)}function G(){$e(),me&&(me.remove(),me=null)}function J(n){if(1==n.which&&Je("selectable")){Ke(n);var r,a=!1;Ae.start(function(t,n){if(G(),t&&t.col==n.col&&!N(t)){var o=W(n),i=W(t);r=[o,u(v(o),ke),i,u(v(i),ke)].sort(L);var s=Je("minDate"),l=Je("maxDate");if(s&&s>r[0]||l&&r[1]>=l)return a=!0,e;X(r[0],r[3])}else r=null},n),t(document).one("mouseup",function(t){Ae.stop(),!a&&r&&(+r[0]==+r[1]&&U(r[0],!1,t),Qe(r[0],r[3],!1,t))})}}function U(t,e,n){Ue("dayClick",re[rn(t).col],t,e,n)}function Z(t,e){Ae.start(function(t){if($e(),t)if(N(t))E(t.row,t.col,t.row,t.col);else{var e=W(t),n=u(v(e),Je("defaultEventMinutes"));F(e,n)}},e)}function $(t,e,n){var r=Ae.stop();$e(),r&&Ue("drop",t,W(r),N(r),e,n)}var Q=this;Q.renderAgenda=o,Q.setWidth=m,Q.setHeight=y,Q.afterRender=b,Q.defaultEventEnd=q,Q.timePosition=A,Q.getIsCellAllDay=N,Q.allDayRow=_,Q.getCoordinateGrid=function(){return We},Q.getHoverListener=function(){return Ae},Q.colLeft=k,Q.colRight=R,Q.colContentLeft=H,Q.colContentRight=z,Q.getDaySegmentContainer=function(){return fe},Q.getSlotSegmentContainer=function(){return pe},Q.getMinMinute=function(){return je},Q.getMaxMinute=function(){return Be},Q.getSlotContainer=function(){return he},Q.getRowCnt=function(){return 1},Q.getColCnt=function(){return ze},Q.getColWidth=function(){return xe},Q.getSnapHeight=function(){return Ye},Q.getSnapMinutes=function(){return ke},Q.defaultSelectionEnd=P,Q.renderDayOverlay=S,Q.renderSelection=V,Q.clearSelection=G,Q.reportDayClick=U,Q.dragStart=Z,Q.dragStop=$,ge.call(Q,n,r,a),be.call(Q),De.call(Q),ae.call(Q);var K,te,ee,ne,re,oe,ie,se,le,ce,fe,ue,de,ve,he,pe,ye,me,we,Te,Ee,xe,Oe,Fe,ke,He,Ye,ze,Ne,We,Ae,Le,_e,qe,Pe,je,Be,Ie,Ve,Xe,Ge,Je=Q.opt,Ue=Q.trigger,Ze=Q.renderOverlay,$e=Q.clearOverlays,Qe=Q.reportSelection,Ke=Q.unselect,tn=Q.daySelectionMousedown,en=Q.slotSegHtml,nn=Q.cellToDate,rn=Q.dateToCell,an=Q.rangeToSegments,on=r.formatDate,sn={};B(n.addClass("fc-agenda")),We=new Ce(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;ee.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Je("allDaySlot")&&(a=de,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=he.offset().top,l=ve.offset().top,c=l+ve.outerHeight(),f=0;Ne*He>f;f++)e.push([r(s+Ye*f),r(s+Ye*(f+1))])}),Ae=new Me(We),Le=new Se(function(t){return oe.eq(t)}),_e=new Se(function(t){return ie.eq(t)})}function ae(){function n(t,e){var n,r=t.length,o=[],i=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):i.push(t[n]);m("allDaySlot")&&(te(o,e),S()),s(a(i),e)}function r(){x().empty(),k().empty()}function a(e){var n,r,a,s,l,c=q(),f=z(),d=R(),h=t.map(e,i),g=[];for(r=0;c>r;r++)for(n=_(0,r),u(n,f),l=o(e,h,n,u(v(n),d-f)),l=oe(l),a=0;l.length>a;a++)s=l[a],s.col=r,g.push(s);return g}function o(t,e,n,r){var a,o,i,s,l,c,f,u,d=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(l=v(n),f=!1):(l=i,f=!0),s>r?(c=v(r),u=!1):(c=s,u=!0),d.push({event:o,start:l,end:c,isStart:f,isEnd:u}));return d.sort(he)}function i(t){return t.end?v(t.end):u(v(t.start),m("defaultEventMinutes"))}function s(n,r){var a,o,i,s,c,u,d,v,h,g,p,y,D,b,C,M,T=n.length,S="",x=k(),O=m("isRTL");for(a=0;T>a;a++)o=n[a],i=o.event,s=N(o.start,o.start),c=N(o.start,o.end),u=A(o.col),d=L(o.col),v=d-u,d-=.025*v,v=d-u,h=v*(o.forwardCoord-o.backwardCoord),m("slotEventOverlap")&&(h=Math.max(2*(h-10),h)),O?(p=d-o.backwardCoord*v,g=p-h):(g=u+o.backwardCoord*v,p=g+h),g=Math.max(g,u),p=Math.min(p,d),h=p-g,o.top=s,o.left=g,o.outerWidth=h,o.outerHeight=c-s,S+=l(i,o);for(x[0].innerHTML=S,y=x.children(),a=0;T>a;a++)o=n[a],i=o.event,D=t(y[a]),b=w("eventRender",i,i,D),b===!1?D.remove():(b&&b!==!0&&(D.remove(),D=t(b).css({position:"absolute",top:o.top,left:o.left}).appendTo(x)),o.element=D,i._id===r?f(i,D,o):D[0]._fci=a,G(i,D));for(E(x,n,f),a=0;T>a;a++)o=n[a],(D=o.element)&&(o.vsides=Y(D,!0),o.hsides=F(D,!0),C=D.find(".fc-event-title"),C.length&&(o.contentTop=C[0].offsetTop));for(a=0;T>a;a++)o=n[a],(D=o.element)&&(D[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",M=Math.max(0,o.outerHeight-o.vsides),D[0].style.height=M+"px",i=o.event,o.contentTop!==e&&10>M-o.contentTop&&(D.find("div.fc-event-time").text(ne(i.start,m("timeFormat"))+" - "+i.title),D.find("div.fc-event-title").remove()),w("eventAfterRender",i,i,D))}function l(t,e){var n="<",r=t.url,a=V(t,m),o=["fc-event","fc-event-vert"];return D(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+j(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+j(re(t.start,t.end,m("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+j(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&b(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function f(t,e,n){var r=e.find("div.fc-event-time");D(t)&&h(t,e,r),n.isEnd&&b(t)&&p(t,e,r),M(t,e)}function d(t,e,n){function r(){l||(e.width(a).height("").draggable("option","grid",null),l=!0)}var a,o,i,s=n.isStart,l=!0,f=H(),u=P(),d=B(),h=I(),p=z();e.draggable({opacity:m("dragOpacity","month"),revertDuration:m("dragRevertDuration"),start:function(n,p){w("eventDragStart",e,t,n,p),U(t,e),a=e.width(),f.start(function(n,a){if(K(),n){o=!1;var f=_(0,a.col),p=_(0,n.col);i=g(p,f),n.row?s?l&&(e.width(u-10),O(e,d*Math.round((t.end?(t.end-t.start)/Ne:m("defaultEventMinutes"))/h)),e.draggable("option","grid",[u,1]),l=!1):o=!0:(Q(c(v(t.start),i),c(T(t),i)),r()),o=o||l&&!i}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(f.stop(),K(),w("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),J(t,e);else{var s=0;l||(s=Math.round((e.offset().top-X().offset().top)/d)*h+p-(60*t.start.getHours()+t.start.getMinutes())),Z(this,t,i,s,l,n,a)}}})}function h(t,e,n){function r(){K(),s&&(f?(n.hide(),e.draggable("option","grid",null),Q(c(v(t.start),D),c(T(t),D))):(a(b),n.css("display",""),e.draggable("option","grid",[E,x])))}function a(e){var r,a=u(v(t.start),e);t.end&&(r=u(v(t.end),e)),n.text(re(a,r,m("timeFormat")))}var o,i,s,l,f,d,h,p,D,b,C,M=y.getCoordinateGrid(),S=q(),E=P(),x=B(),O=I();e.draggable({scroll:!1,grid:[E,x],axis:1==S?"y":!1,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(n,r){w("eventDragStart",e,t,n,r),U(t,e),M.build(),o=e.position(),i=M.cell(n.pageX,n.pageY),s=l=!0,f=d=W(i),h=p=0,D=0,b=C=0},drag:function(t,n){var a=M.cell(t.pageX,t.pageY);if(s=!!a){if(f=W(a),h=Math.round((n.position.left-o.left)/E),h!=p){var c=_(0,i.col),u=i.col+h;u=Math.max(0,u),u=Math.min(S-1,u);var v=_(0,u);D=g(v,c)}f||(b=Math.round((n.position.top-o.top)/x)*O)}(s!=l||f!=d||h!=p||b!=C)&&(r(),l=s,d=f,p=h,C=b),e.draggable("option","revert",!s)},stop:function(n,a){K(),w("eventDragStop",e,t,n,a),s&&(f||D||b)?Z(this,t,D,f?0:b,f,n,a):(s=!0,f=!1,h=0,D=0,b=0,r(),e.css("filter",""),e.css(o),J(t,e))}})}function p(t,e,n){var r,a,o=B(),i=I();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,U(t,e),w("eventResizeStart",this,t,n,o)},resize:function(s,l){r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o),r!=a&&(n.text(re(t.start,r||t.end?u(C(t),i*r):null,m("timeFormat"))),a=r)},stop:function(n,a){w("eventResizeStop",this,t,n,a),r?$(this,t,0,i*r,n,a):J(t,e)}})}var y=this;y.renderEvents=n,y.clearEvents=r,y.slotSegHtml=l,pe.call(y);var m=y.opt,w=y.trigger,D=y.isEventDraggable,b=y.isEventResizable,C=y.eventEnd,M=y.eventElementHandlers,S=y.setHeight,x=y.getDaySegmentContainer,k=y.getSlotSegmentContainer,H=y.getHoverListener,R=y.getMaxMinute,z=y.getMinMinute,N=y.timePosition,W=y.getIsCellAllDay,A=y.colContentLeft,L=y.colContentRight,_=y.cellToDate,q=y.getColCnt,P=y.getColWidth,B=y.getSnapHeight,I=y.getSnapMinutes,X=y.getSlotContainer,G=y.reportEventElement,J=y.showEvents,U=y.hideEvents,Z=y.eventDrop,$=y.eventResize,Q=y.renderDayOverlay,K=y.clearOverlays,te=y.renderDayEvents,ee=y.calendar,ne=ee.formatDate,re=ee.formatDates;y.draggableDayEvent=d}function oe(t){var e,n=ie(t),r=n[0];if(se(n),r){for(e=0;r.length>e;e++)le(r[e]);for(e=0;r.length>e;e++)ce(r[e],0,0)}return fe(n)}function ie(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&ue(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function se(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for(a=n[r],a.forwardSegs=[],o=e+1;t.length>o;o++)ue(a,t[o],a.forwardSegs)}function le(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;a.length>n;n++)r=a[n],le(r),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function ce(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(ve),ce(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;o.length>a;a++)ce(o[a],0,t.forwardCoord)}function fe(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}function ue(t,e,n){n=n||[];for(var r=0;e.length>r;r++)de(t,e[r])&&n.push(e[r]);return n}function de(t,e){return t.end>e.start&&t.start<e.end}function ve(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||he(t,e)}function he(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ge(n,r,a){function o(e,n){var r=J[e];return t.isPlainObject(r)?P(r,n||a):r}function i(t,e){return r.trigger.apply(r,[t,e||_].concat(Array.prototype.slice.call(arguments,2),[_]))}function s(t){var e=t.source||{};return G(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))&&!o("disableDragging")}function l(t){var e=t.source||{};return G(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))&&!o("disableResizing")}function f(t){I={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],I[n._id]?I[n._id].push(n):I[n._id]=[n]}function d(){I={},V={},X=[]}function h(t){return t.end?v(t.end):q(t)}function p(t,e){X.push({event:t,element:e}),V[t._id]?V[t._id].push(e):V[t._id]=[e]}function y(){t.each(X,function(t,e){_.trigger("eventDestroy",e.event,e.event,e.element)})}function m(t,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?e:i("eventClick",this,t,r)}).hover(function(e){i("eventMouseover",this,t,e)},function(e){i("eventMouseout",this,t,e)})}function w(t,e){b(t,e,"show")}function D(t,e){b(t,e,"hide")}function b(t,e,n){var r,a=V[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function C(t,e,n,r,a,o,s){var l=e.allDay,c=e._id;T(I[c],n,r,a),i("eventDrop",t,e,n,r,a,function(){T(I[c],-n,-r,l),B(c)},o,s),B(c)}function M(t,e,n,r,a,o){var s=e._id;S(I[s],n,r),i("eventResize",t,e,n,r,function(){S(I[s],-n,-r),B(s)},a,o),B(s)}function T(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),u(c(o.start,n,!0),r),o.end&&(o.end=u(c(o.end,n,!0),r)),j(o,J)}function S(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=u(c(h(r),e,!0),n),j(r,J)}function E(t){return"object"==typeof t&&(t=t.getDay()),$[t]}function x(){return U}function O(t,e,n){for(e=e||1;$[(t.getDay()+(n?e:0)+7)%7];)c(t,e)}function F(){var t=_.cellToCellOffset.apply(null,arguments),e=_.cellOffsetToDayOffset(t),n=R(e);return n}function k(t,e){var n=_.getColCnt(),r=te?-1:1,a=te?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function H(t){var e=_.visStart.getDay();return t+=Q[e],7*Math.floor(t/U)+K[(t%U+U)%U]-e}function R(t){var e=v(_.visStart);return c(e,t),e}function Y(t){var e=_.dateToDayOffset(t),n=_.dayOffsetToCellOffset(e),r=W(n);return r}function z(t){return g(t,_.visStart)}function N(t){var e=_.visStart.getDay();return t+=e,Math.floor(t/7)*U+Q[(t%7+7)%7]-Q[e]}function W(t){var e=_.getColCnt(),n=te?-1:1,r=te?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function A(){return 0}function L(t,e){for(var n=_.getRowCnt(),r=_.getColCnt(),a=[],o=_.dateToDayOffset(t),i=_.dateToDayOffset(e),s=_.dayOffsetToCellOffset(o),l=_.dayOffsetToCellOffset(i)-1,c=0;n>c;c++){var f=_.rowToGridOffset(c),u=c*r,d=u+r-1,v=Math.max(s,u),h=Math.min(l,d);if(h>=v){var g=W(v),p=W(h),y=[g.col,p.col].sort(),m=_.cellOffsetToDayOffset(v)==o,w=_.cellOffsetToDayOffset(h)+1==i;a.push({gridOffset:f,row:c,leftCol:y[0],rightCol:y[1],isStart:m,isEnd:w})}}return a}var _=this;_.element=n,_.calendar=r,_.name=a,_.opt=o,_.trigger=i,_.isEventDraggable=s,_.isEventResizable=l,_.setEventData=f,_.clearEventData=d,_.eventEnd=h,_.reportEventElement=p,_.triggerEventDestroy=y,_.eventElementHandlers=m,_.showEvents=w,_.hideEvents=D,_.eventDrop=C,_.eventResize=M,_.rowToGridOffset=A;var q=_.defaultEventEnd,j=r.normalizeEvent,B=r.reportEventChange,I={},V={},X=[],J=r.options;_.isHiddenDay=E,_.skipHiddenDays=O,_.getCellsPerWeek=x,_.dateToCell=Y,_.dateToDayOffset=z,_.dayOffsetToCellOffset=N,_.cellOffsetToCell=W,_.cellToDate=F,_.cellToCellOffset=k,_.cellOffsetToDayOffset=H,_.dayOffsetToDate=R,_.rangeToSegments=L;var U,Z=o("hiddenDays")||[],$=[],Q=[],K=[],te=o("isRTL");(function(){o("weekends")===!1&&Z.push(0,6);for(var e=0,n=0;7>e;e++)Q[e]=n,$[e]=-1!=t.inArray(e,Z),$[e]||(K[n]=e,n++);if(U=n,!U)throw"invalid hiddenDays"})()}function pe(){function e(t,e){var n=r(t,!1,!0);me(n,function(t,e){R(t.event,e)}),w(n,e),me(n,function(t,e){x("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var a=r([t],!0,!1),o=[];return me(a,function(t,r){t.row===e&&r.css("top",n),o.push(r[0])}),o}function r(e,n,r){var o,l,c=U(),d=n?t("<div/>"):c,v=a(e);return i(v),o=s(v),d[0].innerHTML=o,l=d.children(),n&&c.append(l),f(v,l),me(v,function(t,e){t.hsides=F(e,!0)}),me(v,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),me(v,function(t,e){t.outerHeight=e.outerHeight(!0)}),u(v,r),v}function a(t){for(var e=[],n=0;t.length>n;n++){var r=o(t[n]);e.push.apply(e,r)}return e}function o(t){for(var e=t.start,n=T(t),r=ee(e,n),a=0;r.length>a;a++)r[a].event=t;return r}function i(t){for(var e=S("isRTL"),n=0;t.length>n;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?G:I,o=(e?r.isStart:r.isEnd)?J:X,i=a(r.leftCol,r.gridOffset),s=o(r.rightCol,r.gridOffset);r.left=i,r.outerWidth=s-i}}function s(t){for(var e="",n=0;t.length>n;n++)e+=l(t[n]);return e}function l(t){var e="",n=S("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];O(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=V(r,S);return e+=a?"<a href='"+j(a)+"'":"<div",e+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+j(Z(r.start,r.end,S("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+j(r.title||"")+"</span>"+"</div>",t.isEnd&&k(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(a?"a":"div")+">"}function f(e,n){for(var r=0;e.length>r;r++){var a=e[r],o=a.event,i=n.eq(r),s=x("eventRender",o,o,i);s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function u(t,e){var n=d(t),r=m(),a=[];if(e)for(var o=0;r.length>o;o++)r[o].height(n[o]);for(var o=0;r.length>o;o++)a.push(r[o].position().top);me(t,function(t,e){e.css("top",a[t.row]+t.top)})}function d(t){for(var e=L(),n=q(),r=[],a=h(t),o=0;e>o;o++){for(var i=a[o],s=[],l=0;n>l;l++)s.push(0);for(var c=0;i.length>c;c++){var f=i[c];f.top=_(s.slice(f.leftCol,f.rightCol+1));for(var l=f.leftCol;f.rightCol>=l;l++)s[l]=f.top+f.outerHeight}r.push(_(s))}return r}function h(t){var e,n,r,a=L(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=p(o[r]||[]);return o}function p(t){for(var e=[],n=y(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}function y(t){t.sort(we);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&ye(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function m(){var t,e=L(),n=[];for(t=0;e>t;t++)n[t]=P(t).find("div.fc-day-content > div");return n}function w(t,e){var n=U();me(t,function(t,n,r){var a=t.event;a._id===e?D(a,n,t):n[0]._fci=r}),E(n,t,D)}function D(t,e,n){O(t)&&M.draggableDayEvent(t,e,n),n.isEnd&&k(t)&&M.resizableDayEvent(t,e,n),Y(t,e)}function b(t,e){var n,r=te();e.draggable({delay:50,opacity:S("dragOpacity"),revertDuration:S("dragRevertDuration"),start:function(a,o){x("eventDragStart",e,t,a,o),N(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),Q(),r){var s=ne(a),l=ne(r);n=g(l,s),$(c(v(t.start),n),c(T(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),Q(),x("eventDragStop",e,t,a,o),n?W(this,t,n,0,t.allDay,a,o):(e.css("filter",""),z(t,e))}})}function C(e,r,a){var o=S("isRTL"),i=o?"w":"e",s=r.find(".ui-resizable-"+i),l=!1;B(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(o){function s(n){x("eventResizeStop",this,e,n),t("body").css("cursor",""),f.stop(),Q(),u&&A(this,e,u,0,n),setTimeout(function(){l=!1},0)}if(1==o.which){l=!0;var f=te();L(),q();var u,d,v=r.css("top"),h=t.extend({},e),g=M.dayOffsetToCellOffset(re(e.start));K(),t("body").css("cursor",i+"-resize").one("mouseup",s),x("eventResizeStart",this,e,o),f.start(function(r,o){if(r){var s=M.cellToCellOffset(o),l=M.cellToCellOffset(r);if(l=Math.max(l,g),u=M.cellOffsetToDayOffset(l)-M.cellOffsetToDayOffset(s)){h.end=c(H(e),u,!0);var f=d;d=n(h,a.row,v),d=t(d),d.find("*").css("cursor",i+"-resize"),f&&f.remove(),N(e)}else d&&(z(e),d.remove(),d=null);Q(),$(e.start,c(T(e),u))}},o)}})}var M=this;M.renderDayEvents=e,M.draggableDayEvent=b,M.resizableDayEvent=C;var S=M.opt,x=M.trigger,O=M.isEventDraggable,k=M.isEventResizable,H=M.eventEnd,R=M.reportEventElement,Y=M.eventElementHandlers,z=M.showEvents,N=M.hideEvents,W=M.eventDrop,A=M.eventResize,L=M.getRowCnt,q=M.getColCnt;M.getColWidth;var P=M.allDayRow,I=M.colLeft,X=M.colRight,G=M.colContentLeft,J=M.colContentRight;M.dateToCell;var U=M.getDaySegmentContainer,Z=M.calendar.formatDates,$=M.renderDayOverlay,Q=M.clearOverlays,K=M.clearSelection;M.getRowMaxWidth&&M.getRowMaxWidth;var te=M.getHoverListener,ee=M.rangeToSegments,ne=M.cellToDate;M.cellToCellOffset,M.cellOffsetToDayOffset;var re=M.dateToDayOffset;M.dayOffsetToCellOffset}function ye(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function me(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function we(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function De(){function n(t,e,n){r(),e||(e=c(t,n)),f(t,e,n),a(t,e,n)}function r(t){d&&(d=!1,u(),l("unselect",null,t))}function a(t,e,n,r){d=!0,l("select",null,t,e,n,r)}function o(n){var o=i.cellToDate,l=i.getIsCellAllDay,c=i.getHoverListener(),d=i.reportDayClick,v=!1;if(1==n.which&&s("selectable")){r(n);var h;c.start(function(t,n){if(u(),t&&l(t)){h=[o(n),o(t)].sort(L);var r=s("minDate"),a=s("maxDate");if(r&&r>h[0]||a&&h[1]>=a)return v=!0,e;f(h[0],h[1],!0)}else h=null},n),t(document).one("mouseup",function(t){c.stop(),!v&&h&&(+h[0]==+h[1]&&d(h[0],!0,t),a(h[0],h[1],!0,t))})}}var i=this;i.select=n,i.unselect=r,i.reportSelection=a,i.daySelectionMousedown=o;var s=i.opt,l=i.trigger,c=i.defaultSelectionEnd,f=i.renderSelection,u=i.clearSelection,d=!1;s("selectable")&&s("unselectAuto")&&t(document).mousedown(function(e){var n=s("unselectCancel");n&&t(e.target).parents(n).length||r(e)})}function be(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function Ce(t,e){var n,r,a=this;a.build=function(){n=[],r=[],t(n,r)},e&&(a.gridToView=e),a.cell=function(t,e){var o,i=n.length,s=r.length,l=-1,c=-1;for(o=0;i>o;o++)if(e>=n[o][0]&&n[o][1]>e){l=o;break}for(o=0;s>o;o++)if(t>=r[o][0]&&r[o][1]>t){c=o;break}if(l>=0&&c>=0&&a.gridToView){var f=a.gridToView(c,l);c=f[0],l=f[1]}return l>=0&&c>=0?{row:l,col:c,grid:a}:null},a.rect=function(t,e,a,o,i){var s=i.offset();return{top:n[t][0]-s.top,left:r[e][0]-s.left,width:r[o][1]-r[e][0],height:n[a][1]-n[t][0]}}}function Me(n){function r(e){Te(e);var n=null;t.each(c,function(t,r){n||(n=r.cell(e.pageX,e.pageY))}),(!n!=!s||n&&(n.row!=s.row||n.col!=s.col))&&(n?(i||(i=n),o(n,i,n.row-i.row,n.col-i.col)):o(n,i),s=n)}var a,o,i,s,l=this,c=[];n.length===e?c.push(n):c=n,l.start=function(e,n,l){o=e,i=s=null,t.each(c,function(t,e){e.build()}),r(n),a=l||"mousemove",t(document).bind(a,r)},l.stop=function(){return t(document).unbind(a,r),s}}function Te(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function Se(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var Ee={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",minDate:null,maxDate:null,titleFormat:{year:"yyyy",month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{year:"MMMM",month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesShortest:["S","M","T","W","T","F","S"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",year:"year",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},xe={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Oe=t.fullCalendar={version:"1.6.4-yearview"},Fe=Oe.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}n=n||{};var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},Ee,n.isRTL||n.isRTL===e&&Ee.isRTL?xe:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},Oe.sourceNormalizers=[],Oe.sourceFetchers=[];var ke={dataType:"json",cache:!1},He=1;Oe.addDays=c,Oe.cloneDate=v,Oe.parseDate=m,Oe.parseISO8601=w,Oe.parseTime=D,Oe.formatDate=b,Oe.formatDates=C;var Re=["sun","mon","tue","wed","thu","fri","sat"],Ye=864e5,ze=36e5,Ne=6e4,We={s:function(t){return t.getSeconds()},ss:function(t){return q(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return q(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return q(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return q(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return q(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},e:function(t,e){return e.dayNamesShortest[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return q(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},zzzz:function(t){return t.getFullYear()+1},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return b(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return M(t)}};Oe.dateFormatters=We,Oe.applyAll=X,Fe.month=J,Fe.basicWeek=U,Fe.basicDay=Z,n({weekMode:"fixed"}),Fe.year=K,Fe.agendaWeek=ee,Fe.agendaDay=ne,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);